<div class="right">
    <?php if( $this->getPermission( "input" ) ): ?>
        <?=$this->ajax( $this->translate("new")." ".$this->translate("assessments") , "evaluation" , "/evaluation/evaluation/input" , 2 ) ?>
    <?php endif; ?>
    <?php if( $this->getPermission( array( "module" => "evaluation" , "controller" => "question" , "action" => "input" ) ) ):?>
        <?=$this->ajax( $this->translate( 'create question in bank of the question' ) , "evaluation" , "$this->url/evaluation/question/input/" , 2 )?>
    <?php endif; ?>
</div>
<br /><br />
<?php if( $this->rs->count() ):?>
	<table class="datatable">
		<tr>
			<th width="250"><?=$this->translate("title")?></th>

                        <?php if ( $this->role != Role::STUDENT && $this->role != Role::TEACHER) : ?>
                            <th><?=$this->translate("begin date")?></th>
                            <th><?=$this->translate("end date")?></th>			
			<?php endif;?>

			<th></th>
			<?php if( $this->getPermission( "input" ) || $this->getPermission( "delete" ) ): ?>
				<th width="77"></th>
			<?php endif;?>
		</tr>
		<?php foreach( $this->rs as $rs ):?>
			<?php $class  = $this->changeClass( $this->rs->key() , array( "light_gray" , "white" ) );?>
			
			<?php if( $this->getPermission( "input" ) ): ?>
				<?php $edit = $this->ajax( $this->translate("edit") , 'evaluation' , '/evaluation/evaluation/input/id/' . $rs->id );?>	
			<?php endif;?>
				
			<?php if( $this->getPermission( "delete" ) ): ?>
				<?php $delete = $this->ajax( $this->translate("delete") , 'evaluation' , '/evaluation/evaluation/delete/id/' . $rs->id , 1 , $this->translate("want to delete?") );?>
			<?php endif;?>
			
			<tr class="<?=$class?>">
                            <?php if ( $this->role == Role::STUDENT ) : ?>
                                <td width="80%">
                                    <?php $confirmStudent = null ?>
                                    <?=$rs->name?>
                            <?php else : ?>
                                <td >
                                    <?=$rs->name?>
                            <?php endif;?>
				</td>
                                <?php if ( $this->role != Role::STUDENT && $this->role != Role::TEACHER) : ?>
                                    <td ><?=$rs->started?></td>
                                    <td >
                                        <?php if( isset( $rs->finished ) && $rs->finished ):?>
                                                <?=$rs->finished?>
                                        <?php else:?>
                                                ----
                                        <?php endif;?>
                                    </td>
                                <?php endif;?>
				
				<td >
                    <?//php if( $this->getPermission( array( "module" => "evaluation" , "controller" => "correct" , "action" => "index"  ) ) ): ?>
                        <?//=$this->ajax( $this->translate("correct") , 'evaluation' , '/evaluation/correct/index/id/' . $rs->id ) ?>
                    <?//php endif;?>
                    <?php if( $this->getPermission( array( "module" => "evaluation" , "controller" => "reply" , "action" => "students-evaluated"  ) ) ): ?>
                        <?=$this->ajax( $this->translate("students evaluated") , 'evaluation' , '/evaluation/reply/students-evaluated/id/' . $rs->id ) ?>&nbsp;&nbsp;
                    <?php endif;?>

                    <?php if( $this->getPermission( array( "module" => "evaluation" , "controller" => "evaluation" , "action" => "view-evaluation"  ) ) &&  $this->role != Role::STUDENT ): ?>
                        <?=$this->ajax( $this->translate("Gabarito") , 'evaluation' , '/evaluation/evaluation/view-evaluation/id/' . $rs->id ) ?>
                    <?php endif;?>


					&nbsp;
                    <?php if ( $this->role == Role::STUDENT || $this->role == Role::INSTITUTION ):?>
                        <?php if ( $rs->evaluation_final == Status::ACTIVE ) : ?>
                            <?php $confirm = 'Você tem certeza de que deseja realizar a avaliação agora? Só é possível acessá-la UMA ÚNICA VEZ. Após aberta, ela deverá ser realizada no tempo determinado.'; ?>
                        <?php else : ?>
                            <?php $confirm = null ?>
                        <?php endif; ?>
                        <?=$this->ajax( $this->translate( 'make exercise' ) , 'evaluation' , '/evaluation/reply/index/id/' . $rs->id , 1 , $confirm );?>
                        &nbsp;
                        <?=$this->ajax( $this->translate( 'see answer' ) , 'evaluation' , '/evaluation/reply/view/id/' . $rs->id  );?>
                    <?php endif;?>
                </td>
				
				<?php if( $this->getPermission( "input" ) || $this->getPermission( "delete" ) ): ?>
					<td ><?=$edit . " " . $delete?></td>
				<?php endif;?>
			</tr>
		<?php endforeach;?>
	</table>
<?php else:?>
	<?=$this->translate( "there are no records" );?>
<?php endif;?>