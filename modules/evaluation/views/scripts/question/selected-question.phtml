<div>
	<?php $letters = range( 'a' , 'z' );?>
    <?=$this->translate( 'selected question' )?>:
    <div style="margin: 10px 0 30px 0;">
        <div style="background: #fff; border: 1px solid #E6EEEE; padding: 3px 3px 7px 3px;">
			<a href="#this" id="<?=$this->rs->id?>-remove" class="ui-state-default ui-corner-all" style="width: 17px; display: inline-block; position: relative; left: 6px; top: 3px; margin-right: 5px;">
                <span class="ui-icon ui-icon-trash"><?=$this->translate( 'delete' )?></span>
            </a>
			<?php if( isset( $this->rs->label ) && $this->rs->label && !$this->rs->labels ):?>
				<?=nl2br( $this->rs->label )?>
			<?php else:?>
				<?=nl2br( $this->rs->labels )?>
			<?php endif;?>
			<br /><br />
			<?php if( $this->rs->type == "text" ): ?>
            <div class="question">
                <?php
                    $alternative = $this->rs->findDependentRowset( "EvaluationValue" )->current();
                ?>
                <br />
            </div>
			
			<div class="padding" style="background: #FFF; border: green solid 1px;">
				<b><?=$this->translate( "feedback" )?>:</b> <?=$alternative->value?>
				<?php if( isset( $alternative->justify ) && $alternative->justify ):?>
					<br />
					<b><?=$this->translate( "justify" )?>:</b> <?=$alternative->justify?>
				<?php endif;?>
			</div>
            <br />
        <?php endif; ?>
        
        <?php if( $this->rs->type == "truefalse" ): ?>
            <div class="question">
                <?php
                    $alternatives = $this->rs->findDependentRowset( "EvaluationValue" , null , $this->rs->select()->order( "id" ) );
                    $j = 0;
					$questions = 0;
                ?>
                <?php foreach( $alternatives as $key => $alternative ):?>
                <div style="margin-bottom: 10px">
					<?=$letters[$j], ") ";?>
                    <select name="<?=$this->rs->id?>[<?=$alternative->id?>]">
                        <option value="" ></option>
                        <option label="V" value="V" >V</option>
                        <option label="F" value="F" >F</option>
                    </select>
                    <span><?=$alternative->value?></span>
                    <br />
                </div>     
				<?php $feedback .= "{$letters["$questions"]}) - $alternative->status, "?>
				<?php $j++;?>
				<?php $questions++;?>
                <?php endforeach;?>
                <br />
            </div>
			<div class="padding" style="background: #FFF; border: green solid 1px;">
				<b><?=$this->translate( "feedback" )?>:</b> <?=substr($feedback, 0 , -2)?>
			</div>
            <br />
        <?php endif; ?>

        <?php if( $this->rs->type == "association" ): ?>
            <div class="question">
                <?php
                    $alternatives = $this->rs->findDependentRowset( "EvaluationValue" , null , $this->rs->select()->order( "id" ) );
                    $j = 0;
					$questions = 0;
                ?>
                <?php foreach( $alternatives as $key => $alternative ):?>
                <div style="margin-bottom: 10px">
					<?=$letters[$j], ") ";?>
                    <?=$this->formSelect( "{$this->rs->id[$alternative->id]}", null , null , $letters )?>
                    <span><?=$alternative->value?></span>
                    <br />
                </div>
				<?php $feedback .= "{$letters[$questions]}) - $alternative->status, "?>
				<?php $j++;?>
				<?php $questions++;?>
                <?php endforeach;?>
                <br />
            </div>
			<div class="padding" style="background: #FFF; border: green solid 1px;">
				<b><?=$this->translate( "feedback" )?>:</b> <?=substr($feedback, 0 , -2)?>
			</div>
            <br />
        <?php endif; ?>
        
        <?php if( $this->rs->type == "radio" ): ?>
            <div class="question">
                <?php
                    $alternatives = $this->rs->findDependentRowset( "EvaluationValue" , null , $this->rs->select()->order( "id" ) );
                    $j = 0;
					$questions = 0;
                ?>
					
                <?php foreach( $alternatives as $key => $alternative ):?>
                <div style="margin-bottom: 10px">
                    <p>
						<?=$letters[$j], ") ";?>
                        <label for="<?=$this->rs->id."-".$j?>" class="inline"><?=$alternative->value?></label>
                    </p>
                </div>
				<?php
					if( $alternative->status == "V" ){
						$feedback = $letters["$questions"].") ";
					}
				?>
                <?php $j++ ?>
				<?php $questions++;?>
                <?php endforeach;?>
                <br />
            </div>
			<div class="padding" style="background: #FFF; border: green solid 1px;">
				<b><?=$this->translate( "feedback" )?>:</b> <?=$feedback?>
				<?php if( isset( $alternative->justify ) && $alternative->justify ):?>
					<br />
					<b><?=$this->translate( "justify" )?>:</b> <?=$alternative->justify?>
				<?php endif;?>
			</div>
            <br />
        <?php endif; ?>
        
        <?php if( $this->rs->type == "checkbox" ): ?>
            <div class="question">
                <br />
                <?php
                    $alternatives = $this->rs->findDependentRowset( "EvaluationValue" , null , $this->rs->select()->order( "id" ) );
                    $j = 0;
					$questions = 0;
					$feedback = "";
                ?>
                <?php foreach( $alternatives as $key => $alternative ):?>
				<?php
					if( $alternative->status == "V" ){
						$feedback .= "{$letters["$questions"]}), ";
					}
				?>
                <div style="margin-bottom: 10px">
					<?=$letters[$j], ") ";?>
                    <label for="<?=$this->rs->id."-".$j?>" class="inline"><?=$alternative->value?></label>
                </div>
                <?php $j++; ?>
				<?php $questions++;?>
                <?php endforeach;?>
				<div class="padding" style="background: #FFF; border: green solid 1px;">
                    <b><?=$this->translate( "feedback" )?>:</b> <?=substr($feedback, 0 , -2)?>
                </div>
                <br />
            </div>
            <br />
        <?php endif; ?>
        
        <?php if( $this->rs->type == "textarea" ): ?>
            <br />
        <?php endif; ?>

        <?php if( $this->rs->type == "keyword" ): ?>
			<?php
                $alternative = $this->rs->findDependentRowset( "EvaluationValue" )->current();
            ?>
			<div class="padding" style="background: #FFF; border: green solid 1px;">
				<b><?=$this->translate( "feedback" )?>:</b> <?=$alternative->value?>
			</div>
            <br />
        <?php endif; ?>
        </div>
    </div>
</div>
<script type="text/javascript">
	jQuery( "#<?=$this->rs->id?>-remove" ).click( function(){
		jQuery( "#note-question" ).hide();
		jQuery( "#note" ).val( "" );
		jQuery( this ).parent().parent().parent().remove();
		jQuery( "#evaluation_question_id" ).val( "" );
	});
</script>
