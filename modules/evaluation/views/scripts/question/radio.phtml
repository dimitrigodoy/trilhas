<div id="inputs">
<?php if( $this->rs && $this->rs->count() ):?>
    <?php $i = 1?>
    <?php foreach( $this->rs as $key => $rs ):?>
        <p id="p-<?=$i?>">
            <input type="radio" name="correct" value="<?=$i?>" <?=$rs->status == "V" ? "checked" : null ?> />
            <input type="text" name="alternative[<?=$i?>]" id="text-<?=$i?>" value="<?=$rs->value?>" />
        </p>
        <?php $i++?>
    <?php endforeach;?>
<?php else:?>
        <p id="p-1">
            <input type="radio" name="correct" value="1" />
            <input type="text" name="alternative[1]" id="text-1" />
        </p>

        <p id="p-2">
            <input type="radio" name="correct" value="2" />
            <input type="text" name="alternative[2]" id="text-2" />
        </p>
<?php endif;?>
</div>

<a id="add" href="#this"><?=$this->translate( 'add alternative' )?></a>

<br /><br />
<label><?=$this->translate( 'justify' )?>:</label>
<input type="text" name="justify" id="justify" />

<script type="text/javascript">
    /**
     * add validate
     *
     * QuestionValidate was the variable created in the file question/input.phtml
     */
    QuestionValidate.add( 'text-1' , Validate.notEmpty , '<?=$this->translate("required field")?>' );
    QuestionValidate.add( 'text-2' , Validate.notEmpty , '<?=$this->translate("required field")?>' );

    /**
     * variable to generate the id's of inputs
     */
    <?php if( $this->rs && $this->rs->count() ):?>
        var i = <?=$i?>;
    <?php else:?>
        var i = 3;
    <?php endif;?>

    /**
     * function to add an input to div 'inputs'
     */
    $( "#add" ).click( function(){
        var id    = 'p-'+i;
        var xhtml = '<p id="'+ id +'">\n\
                        <input type="radio" name="correct" value="'+ i +'" />\n\
                        <input type="text" name="alternative['+ i +']" />\n\
                        <a onclick="$( \'#'+ id +'\' ).remove();" href="#this"><?=$this->translate( 'remove the alternative' )?></a>\n\
                    </p>';
        i++;
        $("#inputs").append( xhtml );
    });


    /**
     * function that verify if input type radio was selected
     */
    $( "#submitQuestion" ).click( function(){
        $( "#<?=$this->model?> input:radio" ).each( function(){
            if( this.checked ){
            //  validate_q was the variable created in the file question/input.phtml
                validate_q = true;
                $("#submitQuestion").trigger('submit');
            }
        });
        
        if( !validate_q ){
            $( "#message-validate" )
                .html( "<?=$this->translate( 'selected the alternative correct' )?>" )
                .css({"border":"1px red solid",
                      "background":"#fff",
                      "padding":"10px",
                      "margin-bottom":"25px"
                  });
        }
    });


</script>