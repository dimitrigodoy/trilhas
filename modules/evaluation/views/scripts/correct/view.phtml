<?php if( isset( $this->rs ) && $this->rs->count() ):?>
    <?php foreach( $this->rs as $key => $rs ):?>
        <p><b><?=$rs->label?></b></p>
        <div style="border: 1px #EEE solid; padding: 4px;">
            <p><?=$rs->value?></p>
        </div>
        <form id="<?=$rs->id?>" action="#" method="post">
            <?=$this->formHidden( "id" , $rs->id )?>
            <label for="note_<?=$rs->id?>"><?=$this->translate( 'enter a note' )?> <?=$rs->question_note?> : </label>
            <?=$this->formText( "note" , null , array( "id" => "note_$rs->id" , "style" => "width: 70px;" ) )?>
            <br /><br />
            <input type="submit" value="<?=$this->translate( 'save' )?>">
        </form>
        <script type="text/javascript">
            $( "#<?=$rs->id?>" ).submit( function(){
                var note = $( "#note_<?=$rs->id?>" ).val();
                note = parseFloat( note.replace( "," , "." ) );

                if( note > <?=$rs->question_note?> || !note ){
                    alert( "<?=$this->translate( 'invalid note' )?>" );
                }else{
                    new Preceptor.util.AjaxUpdate( "evaluation-evaluation" , "<?=$this->url?>/evaluation/correct/save-textarea-note/" , {formId: "<?=$rs->id?>" } );
                }
                return false;
            });
        </script>
        <div class="clear" />
    <?php endforeach;?>
<?php endif;?>
